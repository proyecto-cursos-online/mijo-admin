<form id="kt_ecommerce_add_category_form"
  class="form d-flex flex-column flex-lg-row fv-plugins-bootstrap5 fv-plugins-framework"
  data-kt-redirect="apps/ecommerce/catalog/categories.html">
  <div class="d-flex flex-column gap-7 gap-lg-10 w-100 w-lg-300px mb-7 me-lg-10">
    <div class="card card-flush py-4">
      <div class="card-header">
        <div class="card-title">
          <h2>Imagen</h2>
        </div>
      </div>
      <div class="card-body text-center pt-0">
        <div class="image-input image-input-empty image-input-outline image-input-placeholder mb-3"
          style="background-image: url('assets/media/svg/files/blank-image.svg')">
          <div [ngStyle]="{'background-image': 'url('+ image_prev +')'}" class="image-input-wrapper w-125px h-125px"></div>
            <label class="btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow-sm"
              data-kt-image-input-action="change" data-bs-toggle="tooltip" aria-label="Change avatar"
              data-bs-original-title="Change avatar" data-kt-initialized="1">
              <i class="ki-duotone ki-pencil fs-7">
                <span class="path1"></span>
                <span class="path2"></span>
              </i>
              <input (change)="processImage($event)" type="file" name="avatar" id="customFile"
                accept=".png, .jpg, .jpeg">
            </label>
            <span class="btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow"
              data-kt-image-input-action="cancel" data-bs-toggle="tooltip" aria-label="Cancel avatar"
              data-bs-original-title="Cancel avatar" data-kt-initialized="1">
              <i class="ki-duotone ki-cross fs-2">
                <span class="path1"></span>
                <span class="path2"></span>
              </i>
            </span>
            <span class="btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow"
              data-kt-image-input-action="remove" data-bs-toggle="tooltip" aria-label="Remove avatar"
              data-bs-original-title="Remove avatar" data-kt-initialized="1">
              <i class="ki-duotone ki-cross fs-2">
                <span class="path1"></span>
                <span class="path2"></span>
              </i>
            </span>
          </div>
          <div class="text-muted fs-7">Se le permite imagenes de tipo. *.png, *.jpg y *.jpeg</div>
        </div>
      </div>
      <div class="card card-flush py-4">
        <div class="card-header">
          <div class="card-title">
            <h2>Curso</h2>
          </div>
        </div>
        <div class="card-body pt-0 d-flex flex-column gap-5">
          <div>
            <label class="required fw-bold fs-6 mb-2">Nivel</label>
            <select class="form-control form-select-solid mb-2" name="level" [(ngModel)]="level" placeholder="Selec. Nivel">
              <option value="0" selected disabled>Selecciona un nivel</option>
              <option value="1">Básico</option>
              <option value="2">Intermedio</option>
              <option value="2">Avanzado</option>
            </select>
          </div>
          <div>
            <label class="required fw-bold fs-6 mb-2">Lenguaje</label>
            <select class="form-control form-select-solid mb-2" name="language" [(ngModel)]="language" placeholder="Selec. Idioma">
              <option value="0" selected disabled>Seleccione un lenguaje</option>
              <option value="1">Español</option>
              <option value="2">Ingles</option>
              <option value="2">Portugues</option>
            </select>
          </div>
        </div>
      </div>
    </div>
    <div class="d-flex flex-column flex-row-fluid gap-7 gap-lg-10">
      <div class="card card-flush py-4">
        <div class="card-header">
          <div class="card-title">
            <h2>General</h2>
          </div>
        </div>
        <div class="card-body pt-0">
          <div class="mb-5 fv-row fv-plugins-icon-container">
            <label class="required form-label">Título</label>
            <input type="text" name="title" [(ngModel)]="title" class="form-control" placeholder="Ingrese el titulo">
            <div class="text-muted fs-7">El título del curso debe ser único.</div>
          </div>
          <div class="mb-5 fv-row fv-plugins-icon-container">
            <label class="required form-label">Subtitulo</label>
            <input type="text" name="subtitle" [(ngModel)]="subtitle" class="form-control" placeholder="Ingrese el subtitulo">
          </div>
          <div class="mb-5 fv-row fv-plugins-icon-container">
            <label class="required form-label">Precio (PEN)</label>
            <input type="number" name="price_pen" [(ngModel)]="price_in_soles" class="form-control" placeholder="Ingrese el precio en Soles">
          </div>
          <div class="mb-5 fv-row fv-plugins-icon-container">
            <label class="required form-label">Precio (USD)</label>
            <input type="number" name="price_usd" [(ngModel)]="price_in_dollar" class="form-control" placeholder="Ingrese el precio en Dolares">
          </div>
          <div class="mb-5 fv-row fv-plugins-icon-container">
            <label class="form-label">Descripción</label>
            <ckeditor [data]="description" (change)="onChange($event)"></ckeditor>
          </div>
        </div>
      </div>
      <div class="card card-flush py-4">
        <div class="card-header">
          <div class="card-title">
            <h2>Relaciones</h2>
          </div>
        </div>
        <div class="card-body pt-0">
          <div class="row">
            <div class="col-lg-6">
              <div class="mb-5 fv-row fv-plugins-icon-container">
                <label class="required fw-bold fs-6 mb-2">Categoría</label>
                <select (change)="selectCategory($event)" class="form-control form-select-solid mb-2" name="category_id" [(ngModel)]="category_id"
                  placeholder="Selec. Estado">
                  <option value="0" selected disabled>Seleccione una categoría</option>
                  <ng-container *ngFor="let category of categories">
                    <option [value]="category.id">{{ category.name }}</option>
                  </ng-container>
                </select>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="mb-5 fv-row fv-plugins-icon-container">
                <label class="required fw-bold fs-6 mb-2">Subcategoría</label>
                <select class="form-control form-select-solid mb-2" name="sub_category_id" [(ngModel)]="sub_category_id" placeholder="Selec. Estado">
                  <option value="0" selected disabled>Seleccione una subcategoría</option>
                  <ng-container *ngFor="let subcategory of subcategories_back">
                    <option [value]="subcategory.id">{{ subcategory.name }}</option>
                  </ng-container>
                </select>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="mb-5 fv-row fv-plugins-icon-container">
                <label class="required fw-bold fs-6 mb-2">Instructor</label>
                <select class="form-control form-select-solid mb-2" name="instructor_id" [(ngModel)]="instructor_id" placeholder="Selec. Estado">
                  <option value="0" selected disabled>Seleccione un instructor</option>
                  <ng-container *ngFor="let instructor of instructors">
                    <option [value]="instructor.id">{{ instructor.full_name }}</option>
                  </ng-container>
                </select>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="card card-flush py-4">
        <div class="card-header">
          <div class="card-title">
            <h2>Adicional</h2>
          </div>
        </div>
        <div class="card-body pt-0">
          <div class="row">
            <div class="col-lg-6">
              <div class="mb-5 fv-row fv-plugins-icon-container">
                <label class="required fw-bold fs-6 mb-2">Requerimientos</label>
                <div class="d-flex align-items-center gap-4">
                  <input [(ngModel)]="text_requirement" name="requirements" type="text" class="form-control" placeholder="Ingrese requerimientos">
                  <button (click)="addRequirement($event)" class="btn btn-icon btn-success">
                    <i class="ki-duotone ki-plus fs-2">
                    </i>
                  </button>
                </div>
                <div class="mt-5" *ngFor="let requirement of requirements; let i = index">
                  <div class="d-flex align-items-sm-center">
                    <div class="symbol symbol-50px me-5">
                      <span class="symbol-label bg-light-info">
                        <i class="ki-duotone ki-duotone ki-paper-clip fs-2x text-info">
                          <span class="path1"></span>
                          <span class="path2"></span>
                        </i>
                      </span>
                    </div>
                    <div class="d-flex flex-row-fluid align-items-center flex-wrap my-lg-0 me-2">
                      <div class="flex-grow-1 my-lg-0 my-2 me-2">
                        <span class="text-gray-800 fw-bold fs-6">{{ requirement }}</span>
                      </div>
                      <div class="d-flex align-items-center">
                        <button (click)="removeRequirement(i)" type="button" class="btn btn-icon btn-bg-light btn-active-color-primary btn-sm">
                          <i class="ki-duotone ki-trash fs-2">
                            <span class="path1"></span>
                            <span class="path2"></span>
                            <span class="path3"></span>
                            <span class="path4"></span>
                            <span class="path5"></span>
                          </i>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="mb-5 fv-row fv-plugins-icon-container">
                <label class="required fw-bold fs-6 mb-2">¿Para quién va dirigido?</label>
                <div class="d-flex align-items-center gap-4">
                  <input [(ngModel)]="text_participant" type="text" name="participants" class="form-control" placeholder="Ingrese a quienes va dirigido">
                  <button type="button" (click)="addParticipant($event)" class="btn btn-icon btn-success">
                    <i class="ki-duotone ki-plus fs-2">
                    </i>
                  </button>
                </div>
                <div class="mt-5" *ngFor="let participant of participants; let i = index">
                  <div class="d-flex align-items-sm-center">
                    <div class="symbol symbol-50px me-5">
                      <span class="symbol-label bg-light">
                        <img src="assets/media/svg/avatars/001-boy.svg" class="h-75 align-self-end" alt="">
                      </span>
                    </div>
                    <div class="d-flex flex-row-fluid align-items-center flex-wrap my-lg-0 me-2">
                      <div class="flex-grow-1 my-lg-0 my-2 me-2">
                        <span class="text-gray-800 fw-bold fs-6">{{ participant }}</span>
                      </div>
                      <div class="d-flex align-items-center">
                        <button (click)="removeParticipant(i)" type="button" class="btn btn-icon btn-bg-light btn-active-color-primary btn-sm">
                          <i class="ki-duotone ki-trash fs-2">
                            <span class="path1"></span>
                            <span class="path2"></span>
                            <span class="path3"></span>
                            <span class="path4"></span>
                            <span class="path5"></span>
                          </i>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="card card-flush py-4">
        <div class="card-header">
          <div class="card-title">
            <h2>Estado</h2>
          </div>
        </div>
        <div class="card-body pt-0">
          <div>
            <label class="form-label mb-5">¿Lo publicamos?</label>
            <div class="d-flex fv-row">
              <div class="form-check form-check-custom form-check-solid">
                <input class="form-check-input me-3" name="method" type="radio" value="0"
                  id="kt_ecommerce_add_category_automation_0" checked="checked">
                <label class="form-check-label" for="kt_ecommerce_add_category_automation_0">
                  <div class="fw-bold text-gray-800">Publicar</div>
                  <div class="text-gray-600">Add products to this category one by one by manually selecting this
                    category
                    during product creation or update.</div>
                </label>
              </div>
            </div>
            <div class="separator separator-dashed my-5"></div>
            <div class="d-flex fv-row">
              <div class="form-check form-check-custom form-check-solid">
                <input class="form-check-input me-3" name="method" type="radio" value="1"
                  id="kt_ecommerce_add_category_automation_1">
                <label class="form-check-label" for="kt_ecommerce_add_category_automation_1">
                  <div class="fw-bold text-gray-800">Solo Almacenar</div>
                  <div class="text-gray-600">Products matched with the following conditions will be automatically
                    assigned
                    to this category.</div>
                </label>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="d-flex justify-content-end">
        <a href="apps/ecommerce/catalog/products.html" class="btn btn-light me-5">Cancelar</a>
        <button (click)="save()" type="button" class="btn btn-primary" [disabled]="isLoading | async">
          <span *ngIf="!(isLoading | async)" class="indicator-label">Guardar</span>
          <span *ngIf="isLoading | async">Espera...</span>
          <span *ngIf="isLoading | async" class="spinner-border spinner-border-sm align-middle ms-2"></span>
        </button>
      </div>
    </div>
</form>